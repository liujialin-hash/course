## vim

1. 查看目标字符出现的行数

```sh
grep -n 'xxxx' 文件名
```

2. 查看目标字符出现的最后一行

```sh
grep -n 'xxxx' 文件名 | tail 1
```

3. linux 命令 如何打开文件并且跳到目标

```sh
vi +N 文件名
```



# 在Linux中，什么是家目录？如何更改用户的家目录？

在Linux系统中，家目录（Home Directory）是分配给每个用户的个人目录，用于存储个人文件、配置文件、下载内容等。每个用户都有一个独特的家目录，通常位于`/home`目录下，其名称与用户的用户名相同。例如，用户`john`的家目录通常是`/home/john`。

##### 1. 家目录的作用

1. **个人文件存储**：用户可以在其家目录中保存个人文件，如文档、图片、音乐等。
2. **配置文件**：许多应用程序会在用户的家目录中存储配置文件，记录用户的偏好设置和个性化选项。
3. **隐私保护**：每个用户的家目录默认对其自身是私有的，其他用户无法访问，除非具有相应的权限。
4. **环境变量**：用户的家目录被设置为环境变量`$HOME`，许多程序和脚本会使用这个变量来定位用户的个人数据。

##### 2. 更改用户的家目录

要更改用户的家目录，你可以使用`usermod`命令，并配合适当的选项。以下是更改家目录的步骤：

1. **创建新的家目录**（如果尚未存在）：

   ```bash
   sudo mkdir /new/home/directory
   ```

2. **更改用户家目录**：

   使用`usermod`命令的`-m`（move）选项来更改用户的家目录。这将移动用户的现有家目录内容到新位置，并更新系统记录以反映新的家目录路径。

   ```bash
   sudo usermod -m-d /new/home/directory 用户名
   ```

   例如，要将用户`john`的家目录更改为`/new/home/directory/john`：

   ```bash
   sudo usermod -m -d /new/home/directory/john john
   ```

3. **设置正确的所有权和权限**：
   确保新家目录的所有权和权限设置正确。通常，家目录的所有者应该是对应的用户，权限应该限制为所有者读写执行。

   ```bash
   sudo chown 用户名:用户组 /new/home/directory/用户名
   sudo chmod 700 /new/home/directory/用户名
   ```

4. **更新用户的shell环境**：
   用户的环境变量`$HOME`可能需要更新以反映新的家目录位置。这通常在用户的shell配置文件中设置（如`.bashrc`或`.profile`）。

5. **测试新的家目录**：
   在更改后，让用户注销然后重新登录，以确保新的家目录正常工作，并且用户能够访问其文件。

##### 3. 注意事项

- 在更改家目录之前，确保用户不在系统中登录。正在使用的家目录可能无法移动。
- 更改家目录可能会影响用户的应用程序和脚本，因为它们可能依赖于原始家目录的路径。
- 如果用户正在运行的进程使用了家目录中的文件或子目录，这些进程可能需要重启才能识别家目录的更改。
- 确保新家目录的路径在`/etc/passwd`文件中正确设置，并且所有相关的系统服务和应用程序都已更新。

## 防火墙

1. 查看防火墙规则

```sh
sudo iptables -L
```

2. 修改端口访问规则

```
sudo iptables -A INPUT -p tcp --dport 2881 -j ACCEPT
```

3. 删除端口访问规则

```sh
sudo iptables -D INPUT -p tcp --dport 2881 -j ACCEPT

```

